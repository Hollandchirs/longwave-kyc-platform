# 企业服务自定义功能更新说明

## 🎯 更新概述

将企业服务页面的自定义服务从**单个固定卡片**升级为**可添加多个、可删除的动态卡片**，与合规页面的自定义法规功能保持一致。

---

## ✨ 新功能特性

### 1. **可添加多个自定义服务**
- 用户可以添加任意数量的自定义服务
- 每个服务独立管理
- 无数量限制

### 2. **每个服务独立配置**
每个自定义服务包含：
- **服务名称**：自定义输入（必填）
- **PDF文件**：上传文件（必填）
- **删除按钮**：右上角红色删除按钮

### 3. **添加自定义服务按钮**
- 橙色虚线边框卡片
- 加号图标
- 点击即可添加新服务

### 4. **删除功能**
- 每个自定义服务卡片右上角有删除按钮
- 点击时弹出确认对话框
- 防止误删除

---

## 🎨 界面设计

### 卡片布局（3列网格）

```
┌──────────────┬──────────────┬──────────────┐
│  工作准证    │   财务报告    │   年度审查    │
│  申请        │              │              │
│ (固定卡片)   │  (固定卡片)  │  (固定卡片)   │
└──────────────┴──────────────┴──────────────┘

┌──────────────┬──────────────┬──────────────┐
│  自定义服务1 │  自定义服务2 │  ➕添加服务   │
│  [删除按钮]  │  [删除按钮]  │   (虚线边框)  │
└──────────────┴──────────────┴──────────────┘
```

### 自定义服务卡片

**外观特征：**
- 紫色渐变图标
- 加号icon
- 右上角红色删除按钮（垃圾桶图标）
- 服务名称输入框
- PDF上传区域

**交互状态：**
- 未上传：虚线边框上传区
- 已上传：紫色背景，显示文件名和删除按钮

### 添加按钮卡片

**外观特征：**
- 橙色渐变图标
- 虚线边框
- 悬停时边框变橙色，卡片上移
- "添加自定义服务"标题

---

## 🔄 数据流程

### 添加流程

1. 用户点击"添加自定义服务"按钮
2. 创建新的服务对象：
   ```javascript
   {
     id: 'custom-${timestamp}',
     name: '',
     file: null
   }
   ```
3. 新卡片显示在网格中
4. 用户填写服务名称
5. 用户上传PDF文件
6. 自动保存到localStorage

### 删除流程

1. 用户点击删除按钮
2. 弹出确认对话框
3. 用户确认后从数组中移除
4. 自动更新localStorage

### 提交验证

提交时检查：
- ✅ 至少有一个服务（固定或自定义）
- ✅ 所有自定义服务都填写了名称
- ✅ 所有自定义服务都上传了文件

---

## 💾 数据存储

### localStorage结构

```javascript
{
  "corpServiceData": {
    "workPass": "EP_Application.pdf",
    "financialReport": "Financial_2024.pdf",
    "annualReview": "Annual_Review.pdf",
    "customServices": [
      {
        "id": "custom-1699999999999",
        "name": "税务申报",
        "fileName": "Tax_Filing_2024.pdf"
      },
      {
        "id": "custom-1700000000000",
        "name": "商标注册",
        "fileName": "Trademark_Application.pdf"
      }
    ]
  }
}
```

### 数据持久化

- **保存时机**：任何数据变化时自动保存
- **加载时机**：页面加载时自动加载
- **保存内容**：
  - 固定服务：文件名
  - 自定义服务：ID、名称、文件名

---

## 🌐 多语言支持

### 新增翻译

| 中文 | 英文 |
|-----|------|
| 添加自定义服务 | Add Custom Service |
| 添加您自己的企业服务 | Add your own corporate service |
| 确定要删除这个自定义服务吗？ | Are you sure you want to delete this custom service? |
| 请完整填写所有自定义服务的名称和文件 | Please complete all custom service names and files |

---

## 🎯 使用场景

### 场景1：多个税务文件

```
自定义服务1: Q1税务申报
自定义服务2: Q2税务申报
自定义服务3: Q3税务申报
自定义服务4: Q4税务申报
```

### 场景2：不同类型服务

```
自定义服务1: 商标注册申请
自定义服务2: 专利申请文件
自定义服务3: 营业执照更新
自定义服务4: 银行开户资料
```

### 场景3：分公司文件

```
自定义服务1: 上海分公司年审
自定义服务2: 深圳分公司年审
自定义服务3: 香港分公司审计
```

---

## 🔧 技术实现

### 状态管理

```javascript
// 自定义服务数组
const [customServices, setCustomServices] = useState([]);

// 每个服务对象结构
{
  id: string,     // 唯一标识
  name: string,   // 服务名称
  file: File      // PDF文件对象
}
```

### 关键函数

**添加服务：**
```javascript
const handleAddCustomService = () => {
  const newService = {
    id: `custom-${Date.now()}`,
    name: '',
    file: null
  };
  setCustomServices([...customServices, newService]);
};
```

**删除服务：**
```javascript
const handleDeleteCustomService = (serviceId) => {
  if (window.confirm('确定要删除吗？')) {
    setCustomServices(
      customServices.filter(service => service.id !== serviceId)
    );
  }
};
```

**更新服务名称：**
```javascript
const handleUpdateCustomServiceName = (serviceId, name) => {
  setCustomServices(
    customServices.map(service => 
      service.id === serviceId ? { ...service, name } : service
    )
  );
};
```

**更新服务文件：**
```javascript
const handleUpdateCustomServiceFile = (serviceId, file) => {
  setCustomServices(
    customServices.map(service => 
      service.id === serviceId ? { ...service, file } : service
    )
  );
};
```

---

## ✅ 功能对比

### 更新前

| 特性 | 支持 |
|-----|------|
| 自定义服务数量 | 1个固定 |
| 添加新服务 | ❌ 不支持 |
| 删除服务 | ❌ 不支持 |
| 独立配置 | ❌ 单一配置 |

### 更新后

| 特性 | 支持 |
|-----|------|
| 自定义服务数量 | ✅ 无限制 |
| 添加新服务 | ✅ 支持 |
| 删除服务 | ✅ 支持 |
| 独立配置 | ✅ 每个独立 |

---

## 🚀 演示话术

"现在我们来看企业服务页面的一个重要升级。

之前，用户只能添加**一个自定义服务**。现在，我们允许用户**添加任意数量的自定义服务**。

（点击"添加自定义服务"）

看，点击这个橙色卡片，就会创建一个新的自定义服务。用户可以：
- 给服务起个名字，比如'税务申报'
- 上传相关的PDF文件

如果不需要某个服务了，点击右上角的**删除按钮**就可以移除。

（演示添加多个服务）

这样，用户可以灵活地管理各种企业服务，比如：
- 多个季度的税务申报
- 不同类型的许可证申请
- 各个分公司的文件

所有数据都会**自动保存**到本地，刷新页面后依然存在。"

---

## 📋 测试清单

### 基本功能测试

- [x] 可以添加自定义服务
- [x] 可以填写服务名称
- [x] 可以上传PDF文件
- [x] 可以删除自定义服务
- [x] 删除时有确认对话框
- [x] 可以移除已上传的文件

### 数据持久化测试

- [x] 添加服务后刷新页面，数据保留
- [x] 删除服务后刷新页面，变化保留
- [x] 修改服务名称后刷新页面，变化保留
- [x] 上传文件后刷新页面，文件名保留

### 验证测试

- [x] 提交时检查自定义服务是否完整
- [x] 未填写名称时提示错误
- [x] 未上传文件时提示错误
- [x] 至少有一个服务时才能提交

### 多语言测试

- [x] 中文界面正确显示
- [x] 英文界面正确显示
- [x] 切换语言后功能正常

### 响应式测试

- [x] 桌面端3列布局
- [x] 平板端2列布局
- [x] 移动端1列布局

---

## 💡 用户体验优化

### 优势

✅ **灵活性** - 可添加任意数量的服务  
✅ **清晰性** - 每个服务独立展示  
✅ **易用性** - 简单的添加和删除操作  
✅ **安全性** - 删除前确认，防止误操作  
✅ **持久性** - 自动保存，数据不丢失  

### 与合规页面一致性

现在企业服务页面的自定义功能与合规页面的自定义法规功能保持一致：
- 相同的交互模式
- 相同的视觉设计
- 相同的数据管理方式

---

## 🎨 视觉设计细节

### 颜色方案

| 元素 | 颜色 |
|-----|------|
| 工作准证 | 靛蓝色 (Indigo) |
| 财务报告 | 蓝色 (Blue) |
| 年度审查 | 青色 (Teal) |
| 自定义服务 | 紫色 (Purple) |
| 添加按钮 | 橙色 (Orange) |
| 删除按钮 | 红色 (Red) |

### 图标选择

- 工作准证：公文包 (Briefcase)
- 财务报告：文件 (FileText)
- 年度审查：日历 (Calendar)
- 自定义服务：加号 (Plus)
- 添加按钮：加号 (Plus)
- 删除按钮：垃圾桶 (Trash2)

---

## 🔮 未来增强

### 可能的扩展功能

1. **拖拽排序**
   - 用户可以调整自定义服务的顺序

2. **批量上传**
   - 一次性上传多个文件，自动创建多个服务

3. **模板功能**
   - 预设常用服务类型
   - 用户可以从模板快速创建

4. **分类标签**
   - 给自定义服务打标签
   - 按标签筛选和管理

5. **服务描述**
   - 添加备注字段
   - 记录更详细的信息

---

## ✨ 总结

这次更新将企业服务页面的灵活性提升到了新的高度：

**从** 固定的单一自定义服务  
**到** 灵活的多服务管理系统

用户现在可以根据实际业务需求，自由添加和管理各种企业服务，真正实现了**个性化的企业服务管理**。

---

**更新日期**：2025年11月15日  
**版本**：v2.0 - 动态多服务支持

