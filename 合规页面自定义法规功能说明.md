# 合规页面自定义法规功能说明

## 🎯 功能概述

在Compliance（合规服务）页面中新增了**用户自定义法规卡片**功能，允许用户根据自己的业务需求添加和管理自定义的法律法规信息。

---

## ✨ 核心功能

### 1. 添加自定义法规卡片

用户可以：
- 点击"添加自定义法规"卡片开始创建
- 填写完整的法规信息
- 保存后自动显示下一个新增卡片
- 持续添加多个自定义法规

### 2. 完整的法规信息管理

每个自定义法规可以包含：
- **标题** (必填)
- **副标题** (必填)
- **概述** (必填)
- **要点** (至少1个，可添加多个)
- **详细信息** (可选，可添加多个)
- **资源链接** (可选，可添加多个)

### 3. 自动新增逻辑

- 用户完整填写并保存一个法规后
- 系统自动展开下一个新增表单
- 方便用户连续添加多个法规
- 无需重复点击"添加"按钮

### 4. 卡片管理

- 查看：点击卡片查看完整详情（模态窗口）
- 删除：每个自定义卡片右上角有删除按钮
- 与默认法规卡片统一展示

---

## 🎨 界面设计

### 卡片布局

```
┌──────────────┬──────────────┬──────────────┐
│  新加坡税务  │  新加坡公司  │  员工雇佣法   │
│    政策      │     法       │              │
│  (默认卡片)  │  (默认卡片)  │  (默认卡片)  │
└──────────────┴──────────────┴──────────────┘

┌──────────────┬──────────────┬──────────────┐
│  自定义法规1 │  自定义法规2 │  ➕ 添加新卡片│
│  (可删除)    │  (可删除)    │              │
└──────────────┴──────────────┴──────────────┘
```

### 新增卡片按钮

- **图标**：加号 (Plus)
- **颜色**：橙色渐变 (from-orange-500 to-orange-600)
- **边框**：虚线边框，悬停时变为橙色
- **位置**：与其他卡片同等大小，排列在末尾

### 编辑表单

展开的编辑表单占据整行（`md:col-span-3`），包含：
- 清晰的字段标签
- 必填项标记 (*)
- 占位符示例
- 动态添加/删除按钮
- 保存和取消按钮

---

## 📝 字段说明

### 标题 (Title) *必填*

- **用途**：法规的主要名称
- **示例**：
  - 中文：数据保护法
  - 英文：Data Protection Act

### 副标题 (Subtitle) *必填*

- **用途**：法规的简短说明
- **示例**：
  - 中文：个人数据保护法规
  - 英文：Personal Data Protection Regulations

### 概述 (Overview) *必填*

- **用途**：法规的详细介绍和背景
- **格式**：多行文本框
- **建议长度**：2-5句话

### 要点 (Key Points) *至少1个*

- **用途**：列举法规的关键要素
- **格式**：可添加多个输入框
- **功能**：
  - 点击"添加要点"增加新输入框
  - 点击垃圾桶图标删除（至少保留1个）
- **示例**：
  - "必须获得用户同意"
  - "数据泄露需在72小时内通知"
  - "罚款可达年收入的4%"

### 详细信息 (Additional Details) 可选

- **用途**：提供更深入的解释和说明
- **格式**：可添加多个文本框
- **建议**：每个详情点解释一个具体方面

### 资源链接 (Resources) 可选

- **用途**：相关的官方网站、文档或参考资料
- **格式**：文本输入
- **示例**：
  - "官方网站：www.example.gov.sg"
  - "实施指南 PDF"
  - "常见问题解答页面"

---

## 🔄 用户操作流程

### 添加第一个自定义法规

1. 点击"添加自定义法规"卡片
2. 表单展开，显示所有字段
3. 填写标题、副标题、概述（必填）
4. 添加至少1个要点
5. 可选择添加详细信息和资源
6. 点击"保存"按钮

### 自动继续添加

7. 保存成功后，表单自动关闭
8. 新卡片显示在卡片网格中
9. **300ms后自动展开新的编辑表单** ⭐
10. 用户可以立即填写下一个法规
11. 重复步骤3-10

### 查看和管理

- **查看详情**：点击任意卡片打开模态窗口
- **删除卡片**：点击自定义卡片右上角的删除按钮
- **取消编辑**：点击表单右上角的 X 或"取消"按钮

---

## 🎨 视觉特征

### 默认法规卡片

- 绿色（税务政策）
- 蓝色（公司法）
- 紫色（雇佣法）
- **无删除按钮**

### 自定义法规卡片

- **橙色渐变** (from-orange-500 to-orange-600)
- 文件图标 (FileText)
- **右上角有删除按钮** (红色)
- 与默认卡片样式统一

### 添加新卡片按钮

- 虚线边框
- 橙色主题
- 加号图标
- 悬停效果：边框变橙色，卡片上移

---

## 💡 智能功能

### 1. 表单验证

- **必填字段验证**：标题、副标题、概述
- **要点数量验证**：至少需要1个要点
- **空值过滤**：自动过滤掉空的要点、详情和资源

### 2. 动态字段管理

- **添加功能**：每个数组字段都有"添加"按钮
- **删除功能**：可删除多余的输入框
- **最小数量限制**：要点至少保留1个

### 3. 自动展开新卡片

```javascript
setTimeout(() => {
  handleAddNewCard();
}, 300);
```

保存成功后300ms自动打开新的编辑表单，流畅的用户体验。

### 4. 确认删除

删除前弹出确认对话框，防止误操作：
- 中文：确定要删除这个法规吗？
- 英文：Are you sure you want to delete this regulation?

---

## 🌐 多语言支持

### 界面元素

| 中文 | 英文 |
|-----|------|
| 添加自定义法规 | Add Custom Regulation |
| 新增自定义法规 | Add Custom Regulation |
| 标题 | Title |
| 副标题 | Subtitle |
| 概述 | Overview |
| 要点 | Key Points |
| 详细信息 | Additional Details |
| 资源链接 | Resources |
| 添加要点 | Add Point |
| 添加详情 | Add Detail |
| 添加资源 | Add Resource |
| 保存 | Save |
| 取消 | Cancel |
| 了解更多 | Learn More |

### 提示信息

| 中文 | 英文 |
|-----|------|
| 请填写标题、副标题和概述 | Please fill in title, subtitle and overview |
| 请至少添加一个要点 | Please add at least one key point |
| 确定要删除这个法规吗？ | Are you sure you want to delete this regulation? |

---

## 🔧 技术实现

### 状态管理

```javascript
const [customRegulations, setCustomRegulations] = useState([]); // 自定义法规列表
const [editingCard, setEditingCard] = useState(null); // 当前编辑的卡片
```

### 数据结构

```javascript
{
  id: 'custom-1234567890',
  title: '数据保护法',
  subtitle: '个人数据保护法规',
  overview: '...',
  keyPoints: ['要点1', '要点2', '要点3'],
  details: ['详情1', '详情2'],
  resources: ['资源1', '资源2'],
  icon: FileText,
  color: 'from-orange-500 to-orange-600',
  isCustom: true,
  content: { /* 格式化后的内容用于模态窗口 */ }
}
```

### 保存逻辑

1. 验证必填字段
2. 过滤空值
3. 构建content对象（用于模态窗口显示）
4. 添加到customRegulations数组
5. 清空editingCard
6. 300ms后自动打开新的编辑表单

---

## 📊 使用场景

### 1. 跨境电商

添加：
- 跨境电商法
- 产品责任法
- 消费者保护法

### 2. 金融科技

添加：
- 反洗钱法规
- 支付服务法
- 金融数据保护

### 3. 人力资源

添加：
- 劳动合同法
- 社会保险法规
- 外籍员工管理条例

### 4. 知识产权

添加：
- 商标法
- 专利法
- 版权保护法

---

## 🚀 演示话术

"在合规页面，除了我们预设的**三个核心法规**——新加坡税务政策、公司法和雇佣法——我们还提供了**自定义法规功能**。

点击这个橙色的'添加自定义法规'卡片，您可以添加与您业务相关的任何法律法规。比如，如果您从事数据业务，可以添加'数据保护法'。

填写标题、副标题和概述，这些是必填项。然后添加关键要点，比如'需要用户同意'、'数据加密存储'等。您还可以添加详细信息和相关资源链接。

**这是最贴心的设计**：当您保存完一个法规后，系统会**自动弹出下一个新增表单**，让您可以连续添加多个法规，无需重复点击。

所有自定义法规都会和默认法规一起展示，点击就能查看完整详情。如果需要，右上角的删除按钮可以随时移除不需要的法规。

这个功能让平台真正成为**您自己的合规知识库**。"

---

## ✅ 功能清单

- [x] 添加自定义法规按钮
- [x] 完整的编辑表单
- [x] 必填字段验证
- [x] 动态添加/删除字段
- [x] 保存功能
- [x] 自动展开新卡片
- [x] 查看详情（模态窗口）
- [x] 删除功能（带确认）
- [x] 中英文双语支持
- [x] 响应式布局
- [x] 统一的卡片样式
- [x] 悬停动画效果

---

## 💪 优势特点

### 1. 灵活性
用户可以根据自己的业务需求添加任意法规，不受限于预设内容。

### 2. 连续性
自动展开新表单的设计，让批量添加法规变得轻松高效。

### 3. 完整性
支持多维度的信息录入：标题、要点、详情、资源，形成完整的法规知识体系。

### 4. 一致性
自定义卡片与默认卡片保持统一的视觉风格和交互方式。

### 5. 可维护性
随时可以删除不再需要的法规，保持信息的时效性。

---

## 📈 业务价值

### 满足个性化需求
不同行业、不同业务有不同的合规要求，自定义功能让平台适应所有场景。

### 提升用户粘性
用户投入时间构建自己的法规库，增加了对平台的依赖和粘性。

### 降低客服成本
用户可以自主管理合规信息，减少对客服的咨询需求。

### 展示专业性
完善的法规管理功能体现了平台的专业度和对用户需求的深刻理解。

---

## 🎯 未来增强

### 可能的扩展功能

1. **模板库**
   - 提供常见法规的模板
   - 用户可以基于模板快速创建

2. **分类管理**
   - 按行业、地区分类
   - 标签系统

3. **导入导出**
   - 导出为PDF或JSON
   - 从文件导入法规

4. **协作功能**
   - 团队共享法规库
   - 权限管理

5. **更新提醒**
   - 法规修订通知
   - 时效性管理

---

## 📅 更新日期

2025年11月15日

---

**总结**：自定义法规功能让Compliance页面从一个静态的信息展示页面，变成了一个**动态的、可扩展的法规知识管理平台**。用户可以构建属于自己的合规知识库，真正实现"一站式"合规管理。

